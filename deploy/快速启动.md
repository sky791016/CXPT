# å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ æœ¬åœ°å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

### å‰ææ¡ä»¶
- âœ… Java 21 å·²å®‰è£…
- âœ… Maven å·²å®‰è£…
- âœ… Node.js 18+ å·²å®‰è£…
- âœ… è¾¾æ¢¦æ•°æ®åº“å·²é…ç½®å¹¶å¯è¿æ¥

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨åç«¯
```bash
cd deploy
./start-backend-local.sh
```

åç«¯å°†åœ¨ `http://localhost:8081` å¯åŠ¨

#### 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰
```bash
cd deploy
./start-frontend-local.sh
```

å‰ç«¯å°†åœ¨ `http://localhost:5173` å¯åŠ¨

### æ‰‹åŠ¨å¯åŠ¨

#### åç«¯
```bash
cd voice_community_backend
mvn clean package -DskipTests
java -jar target/voice_community_backend-0.0.1-SNAPSHOT.jar
```

#### å‰ç«¯
```bash
cd voice_community_fe
npm install  # é¦–æ¬¡è¿è¡Œ
npm run dev
```

---

## ğŸ–¥ï¸ æœåŠ¡å™¨éƒ¨ç½²å¿«é€Ÿå¯åŠ¨

### åç«¯éƒ¨ç½²
```bash
cd deploy
./deploy-backend.sh dev
```

### å‰ç«¯éƒ¨ç½²
```bash
cd deploy
./deploy-frontend.sh dev
```

### æ£€æŸ¥æœåŠ¡çŠ¶æ€

#### åç«¯
```bash
# æŸ¥çœ‹è¿›ç¨‹
/usr/local/java/jdk-21.0.3/bin/jps -l | grep voice_community_backend

# æŸ¥çœ‹æ—¥å¿—
tail -f /opt/voice_community_be/logs/app.log
```

#### å‰ç«¯
```bash
# æ£€æŸ¥Nginx
sudo /usr/local/nginx/sbin/nginx -t
sudo /usr/local/nginx/sbin/nginx -s reload
```

---

## âš™ï¸ é¦–æ¬¡éƒ¨ç½²é…ç½®

### 1. é…ç½®æ•°æ®åº“è¿æ¥

ç¼–è¾‘ `voice_community_backend/src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:dm://ä½ çš„æ•°æ®åº“åœ°å€:5236?schema=VCDB
    username: ä½ çš„ç”¨æˆ·å
    password: ä½ çš„å¯†ç 
```

ç¼–è¾‘ `voice_community_backend/conf/flyway.conf`:
```properties
flyway.url=jdbc:dm://ä½ çš„æ•°æ®åº“åœ°å€:5236?schema=VCDB
flyway.user=ä½ çš„ç”¨æˆ·å
flyway.password=ä½ çš„å¯†ç 
```

### 2. åˆå§‹åŒ–æ•°æ®åº“
```bash
cd voice_community_backend
mvn flyway:migrate
```

### 3. é…ç½®Nginxï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

å¤åˆ¶ç¤ºä¾‹é…ç½®å¹¶ä¿®æ”¹ï¼š
```bash
sudo cp deploy/nginx.conf.example /usr/local/nginx/conf/conf.d/voice_community.conf
sudo vim /usr/local/nginx/conf/conf.d/voice_community.conf
# ä¿®æ”¹ server_name ä¸ºå®é™…åŸŸåæˆ–IP
sudo /usr/local/nginx/sbin/nginx -s reload
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### åç«¯
```bash
# æ„å»º
mvn clean package -DskipTests

# å¯åŠ¨
java -jar target/voice_community_backend-0.0.1-SNAPSHOT.jar

# åœæ­¢
jps -l | grep voice_community_backend
kill -15 <PID>

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/app.log
```

### å‰ç«¯
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

### åç«¯å¥åº·æ£€æŸ¥
```bash
# æµ‹è¯•API
curl http://localhost:8081/voice/getVoicesByParam?pageNum=1&pageSize=10
```

### å‰ç«¯è®¿é—®
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- æœ¬åœ°: `http://localhost:5173`
- ç”Ÿäº§: `http://your-domain.com`

---

## â— å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

### ç«¯å£è¢«å ç”¨
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :8081  # åç«¯
lsof -i :5173  # å‰ç«¯

# åœæ­¢è¿›ç¨‹
kill -15 <PID>
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥è¿æ¥é…ç½®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œå’Œé˜²ç«å¢™

### å‰ç«¯APIè¯·æ±‚å¤±è´¥
- æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥Nginxä»£ç†é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒï¼š[éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md)





