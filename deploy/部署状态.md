# 部署状态报告

## 部署时间
2025-11-23 09:15

## 当前状态

### ✅ 后端服务
- **状态**: 已构建并启动
- **进程ID**: 5392
- **端口**: 8081
- **JAR文件**: `voice_community_backend/target/voice_community_backend-0.0.1-SNAPSHOT.jar`
- **日志文件**: `voice_community_backend/logs/app.log`

**问题**: 
- ⚠️ 数据库连接超时（SocketTimeoutException）
- 数据库地址: `10.0.16.126:5236` (可能是内网地址，本地无法访问)

**解决方案**:
1. 如果需要在本地开发，请修改 `application.yml` 中的数据库连接为本地数据库
2. 或者通过VPN连接到内网数据库
3. 或者使用服务器部署（服务器可以访问内网数据库）

### ⚠️ 前端服务
- **状态**: 未启动
- **原因**: 
  - node_modules 不存在
  - npm install 因网络问题失败（ECONNRESET）

**解决方案**:
```bash
cd voice_community_fe
npm install  # 如果网络有问题，可以尝试使用国内镜像
npm run dev
```

或使用国内镜像：
```bash
npm install --registry=https://registry.npmmirror.com
```

## 服务管理命令

### 后端服务
```bash
# 查看进程
jps -l | grep voice_community_backend

# 查看日志
tail -f voice_community_backend/logs/app.log

# 停止服务
kill -15 <PID>

# 重启服务
cd voice_community_backend
java -jar target/voice_community_backend-0.0.1-SNAPSHOT.jar > logs/app.log 2>&1 &
```

### 前端服务
```bash
# 启动（开发模式）
cd voice_community_fe
npm run dev

# 构建（生产模式）
npm run build
```

## 下一步操作

### 本地开发环境
1. **配置本地数据库**（如果需要）
   - 安装达梦数据库
   - 修改 `application.yml` 中的数据库连接
   - 执行 Flyway 迁移

2. **启动前端**
   ```bash
   cd voice_community_fe
   npm install --registry=https://registry.npmmirror.com
   npm run dev
   ```

### 服务器部署
1. **上传代码到服务器**
2. **使用部署脚本**:
   ```bash
   cd deploy
   ./deploy-backend.sh dev
   ./deploy-frontend.sh dev
   ```

## 访问地址

- **后端API**: http://localhost:8081
- **前端页面**: http://localhost:5173 (启动后)

## 注意事项

1. **数据库连接**: 当前配置的数据库地址是内网地址，本地可能无法访问
2. **网络问题**: 如果npm安装失败，可以使用国内镜像源
3. **端口占用**: 确保8081和5173端口未被占用





