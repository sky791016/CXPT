# é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

ç”Ÿæˆæ—¶é—´ï¼š2025-12-30

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

### é¡¹ç›®ç»“æ„

```
CXPT 2/
â”œâ”€â”€ voice_community_backend/          # ä¸»åç«¯æœåŠ¡ (Spring Boot)
â”œâ”€â”€ voice_community_admin_backend/    # ç®¡ç†åå°åç«¯ (Spring Boot)
â”œâ”€â”€ voice_community_fe/              # ç§»åŠ¨ç«¯å‰ç«¯ (React + Vite)
â”œâ”€â”€ voice_community_admin_fe/        # ç®¡ç†åå°å‰ç«¯ (React + Vite)
â””â”€â”€ voice_community_web/              # Webé—¨æˆ·å‰ç«¯ (React + Vite)
```

## âœ… å·²å®Œæˆé…ç½®

### 1. æ•°æ®åº“é…ç½®

- **æ•°æ®åº“ç±»å‹**ï¼šSQLite
- **æ•°æ®åº“ä½ç½®**ï¼š`voice_community_backend/data/voice_community.db`
- **çŠ¶æ€**ï¼šâœ… å·²åˆå§‹åŒ–
- **æ•°æ®**ï¼šâœ… åŒ…å«æµ‹è¯•æ•°æ®ï¼ˆ36ä¸ªç”¨æˆ·ï¼‰

### 2. å‰ç«¯æœåŠ¡

| æœåŠ¡ | ç«¯å£ | çŠ¶æ€ | è®¿é—®åœ°å€ |
|------|------|------|----------|
| ç§»åŠ¨ç«¯å‰ç«¯ | 2000 | âœ… è¿è¡Œä¸­ | http://localhost:2000 |
| ç®¡ç†åå°å‰ç«¯ | 2001 | âœ… è¿è¡Œä¸­ | http://localhost:2001 |
| Webé—¨æˆ·å‰ç«¯ | 2002 | âœ… è¿è¡Œä¸­ | http://localhost:2002 |

**ä¾èµ–çŠ¶æ€**ï¼šâœ… æ‰€æœ‰å‰ç«¯ä¾èµ–å·²å®‰è£…

### 3. åç«¯æœåŠ¡é…ç½®

| æœåŠ¡ | ç«¯å£ | æ•°æ®åº“é…ç½® | çŠ¶æ€ |
|------|------|------------|------|
| ä¸»åç«¯ | 8081 | âœ… å·²é…ç½® | âŒ ç¼–è¯‘å¤±è´¥ |
| ç®¡ç†åç«¯ | 8082 | âœ… å·²é…ç½® | âŒ ç¼–è¯‘å¤±è´¥ |

## âŒ å½“å‰é—®é¢˜

### åç«¯ç¼–è¯‘å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ExceptionInInitializerError: com.sun.tools.javac.code.TypeTag :: UNKNOWN
Caused by: java.lang.NoSuchFieldException: com.sun.tools.javac.code.TypeTag :: UNKNOWN
```

**æ ¹æœ¬åŸå› **ï¼š
- ç³»ç»Ÿä½¿ç”¨ Java 25
- Lombok 1.18.36 ä¸æ”¯æŒ Java 25
- Maven ç¼–è¯‘å™¨æ’ä»¶ä¸ Java 25 å­˜åœ¨å…¼å®¹æ€§é—®é¢˜

**å½±å“**ï¼š
- æ— æ³•ç¼–è¯‘åç«¯æœåŠ¡
- æ— æ³•ç”Ÿæˆ JAR æ–‡ä»¶
- æ— æ³•å¯åŠ¨åç«¯æœåŠ¡

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ Java 21ï¼ˆæ¨èï¼‰

1. **å®‰è£… Java 21**ï¼š
   ```bash
   # macOS
   brew install openjdk@21
   
   # æˆ–ä¸‹è½½ Oracle JDK 21
   # https://www.oracle.com/java/technologies/downloads/#java21
   ```

2. **é…ç½® JAVA_HOME**ï¼š
   ```bash
   export JAVA_HOME=$(/usr/libexec/java_home -v 21)
   ```

3. **éªŒè¯ç‰ˆæœ¬**ï¼š
   ```bash
   java -version  # åº”è¯¥æ˜¾ç¤º java version "21.x.x"
   ```

4. **é‡æ–°ç¼–è¯‘**ï¼š
   ```bash
   cd voice_community_backend
   mvn clean package -DskipTests
   
   cd ../voice_community_admin_backend
   mvn clean package -DskipTests
   ```

### æ–¹æ¡ˆ2ï¼šåœ¨ IDE ä¸­ç¼–è¯‘å’Œè¿è¡Œ

**IntelliJ IDEA**ï¼š
1. æ‰“å¼€é¡¹ç›®
2. `File` > `Project Structure` > `Project` > `SDK` é€‰æ‹© Java 21
3. `Build` > `Rebuild Project`
4. è¿è¡Œ `VoiceCommunityBackendApplication`

**Eclipse**ï¼š
1. æ‰“å¼€é¡¹ç›®
2. `Window` > `Preferences` > `Java` > `Installed JREs` æ·»åŠ  Java 21
3. `Project` > `Properties` > `Java Build Path` > `Libraries` é€‰æ‹© Java 21
4. `Project` > `Clean...` ç„¶å `Project` > `Build Project`
5. è¿è¡Œ `VoiceCommunityBackendApplication`

### æ–¹æ¡ˆ3ï¼šç­‰å¾… Lombok æ›´æ–°

ç­‰å¾… Lombok å‘å¸ƒæ”¯æŒ Java 25 çš„ç‰ˆæœ¬ï¼Œç„¶åæ›´æ–°ä¾èµ–ç‰ˆæœ¬ã€‚

## ğŸš€ å¯åŠ¨æœåŠ¡

### å‰ç«¯æœåŠ¡ï¼ˆå·²å¯åŠ¨ï¼‰

å‰ç«¯æœåŠ¡å·²é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š

```bash
# ç§»åŠ¨ç«¯å‰ç«¯
cd voice_community_fe && npm run dev

# ç®¡ç†åå°å‰ç«¯
cd voice_community_admin_fe && npm run dev

# Webé—¨æˆ·å‰ç«¯
cd voice_community_web && npm run dev
```

### åç«¯æœåŠ¡ï¼ˆéœ€è¦å…ˆè§£å†³ç¼–è¯‘é—®é¢˜ï¼‰

è§£å†³ç¼–è¯‘é—®é¢˜åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š

```bash
# ä¸»åç«¯
cd voice_community_backend
mvn spring-boot:run
# æˆ–
java -jar target/voice_community_backend-0.0.1-SNAPSHOT.jar

# ç®¡ç†åç«¯
cd voice_community_admin_backend
mvn spring-boot:run
# æˆ–
java -jar target/voice_community_admin_backend-0.0.1-SNAPSHOT.jar
```

æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
cd deploy
./start-all-servers.sh
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### å·²å®‰è£…

- âœ… Java 25.0.1ï¼ˆéœ€è¦é™çº§åˆ° Java 21ï¼‰
- âœ… Maven 3.9.12
- âœ… Node.js v24.11.1
- âœ… npm 11.6.2

### éœ€è¦å®‰è£…

- âŒ Java 21ï¼ˆç”¨äºç¼–è¯‘åç«¯ï¼‰

## ğŸ” éªŒè¯æ¸…å•

- [x] æ•°æ®åº“å·²åˆå§‹åŒ–
- [x] æ•°æ®åº“åŒ…å«æµ‹è¯•æ•°æ®
- [x] å‰ç«¯ä¾èµ–å·²å®‰è£…
- [x] å‰ç«¯æœåŠ¡å·²å¯åŠ¨
- [ ] åç«¯ç¼–è¯‘æˆåŠŸ
- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨
- [ ] æ‰€æœ‰æœåŠ¡å¯æ­£å¸¸è®¿é—®

## ğŸ“ ä¸‹ä¸€æ­¥æ“ä½œ

1. **å®‰è£… Java 21**ï¼ˆæ¨èï¼‰
2. **é‡æ–°ç¼–è¯‘åç«¯æœåŠ¡**
3. **å¯åŠ¨åç«¯æœåŠ¡**
4. **éªŒè¯æ‰€æœ‰æœåŠ¡è¿è¡Œæ­£å¸¸**

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®å¯åŠ¨è¯´æ˜](./é¡¹ç›®å¯åŠ¨è¯´æ˜.md)
- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./deploy/å¿«é€Ÿå¯åŠ¨.md)
- [éƒ¨ç½²æŒ‡å—](./deploy/éƒ¨ç½²æŒ‡å—.md)
- [æ„å»ºå’Œè¿è¡ŒæŒ‡å—](./æ„å»ºå’Œè¿è¡ŒæŒ‡å—.md)

