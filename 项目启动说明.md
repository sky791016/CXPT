# é¡¹ç›®å¯åŠ¨è¯´æ˜

## ğŸ“‹ é¡¹ç›®ç»“æ„

æœ¬é¡¹ç›®åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š

1. **voice_community_backend** - ä¸»åç«¯æœåŠ¡ï¼ˆç«¯å£ 8081ï¼‰
2. **voice_community_admin_backend** - ç®¡ç†åå°åç«¯æœåŠ¡ï¼ˆç«¯å£ 8082ï¼‰
3. **voice_community_fe** - ç§»åŠ¨ç«¯å‰ç«¯ï¼ˆç«¯å£ 2000ï¼‰
4. **voice_community_admin_fe** - ç®¡ç†åå°å‰ç«¯ï¼ˆç«¯å£ 2001ï¼‰
5. **voice_community_web** - Webé—¨æˆ·å‰ç«¯ï¼ˆç«¯å£ 2002ï¼‰

## âš ï¸ é‡è¦æç¤ºï¼šJavaç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**å½“å‰é—®é¢˜**ï¼šç³»ç»Ÿä½¿ç”¨ Java 25ï¼Œä½† Lombok ç›®å‰ä¸æ”¯æŒ Java 25ï¼Œå¯¼è‡´åç«¯ç¼–è¯‘å¤±è´¥ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼ˆä¸‰é€‰ä¸€ï¼‰ï¼š

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ Java 21ï¼ˆæ¨èï¼‰

1. å®‰è£… Java 21ï¼š
   ```bash
   # macOS ä½¿ç”¨ Homebrew
   brew install openjdk@21
   
   # æˆ–ä¸‹è½½ Oracle JDK 21
   # https://www.oracle.com/java/technologies/downloads/#java21
   ```

2. é…ç½® JAVA_HOMEï¼š
   ```bash
   export JAVA_HOME=$(/usr/libexec/java_home -v 21)
   ```

3. é‡æ–°ç¼–è¯‘ï¼š
   ```bash
   cd voice_community_backend
   mvn clean package -DskipTests
   ```

### æ–¹æ¡ˆ2ï¼šåœ¨IDEä¸­ç¼–è¯‘å’Œè¿è¡Œï¼ˆæ¨èï¼‰

ä½¿ç”¨ IntelliJ IDEA æˆ– Eclipseï¼š

1. æ‰“å¼€é¡¹ç›®
2. ç¡®ä¿IDEä½¿ç”¨ Java 21
3. åœ¨IDEä¸­ç›´æ¥è¿è¡Œ `VoiceCommunityBackendApplication`
4. IDEé€šå¸¸èƒ½æ›´å¥½åœ°å¤„ç† Lombok æ³¨è§£

### æ–¹æ¡ˆ3ï¼šç­‰å¾… Lombok æ›´æ–°

ç­‰å¾… Lombok å‘å¸ƒæ”¯æŒ Java 25 çš„ç‰ˆæœ¬ï¼Œç„¶åæ›´æ–°ä¾èµ–ã€‚

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### æ•°æ®åº“ä¿¡æ¯

- **ç±»å‹**ï¼šSQLite
- **ä½ç½®**ï¼š`voice_community_backend/data/voice_community.db`
- **çŠ¶æ€**ï¼šâœ… å·²åˆå§‹åŒ–ï¼ŒåŒ…å«æµ‹è¯•æ•°æ®ï¼ˆ36ä¸ªç”¨æˆ·ï¼‰

### æ•°æ®åº“è¿æ¥é…ç½®

**ä¸»åç«¯** (`voice_community_backend/src/main/resources/application.yml`):
```yaml
spring:
  datasource:
    url: jdbc:sqlite:./data/voice_community.db
    driver-class-name: org.sqlite.JDBC
```

**ç®¡ç†åç«¯** (`voice_community_admin_backend/src/main/resources/application.yml`):
```yaml
spring:
  datasource:
    url: jdbc:sqlite:../voice_community_backend/data/voice_community.db
    driver-class-name: org.sqlite.JDBC
```

## ğŸš€ å¯åŠ¨æœåŠ¡

### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd deploy
./start-all-servers.sh
```

### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨

#### 1. å¯åŠ¨ä¸»åç«¯ï¼ˆéœ€è¦å…ˆè§£å†³Javaç‰ˆæœ¬é—®é¢˜ï¼‰

```bash
cd voice_community_backend
mvn spring-boot:run
# æˆ–
java -jar target/voice_community_backend-0.0.1-SNAPSHOT.jar
```

#### 2. å¯åŠ¨ç®¡ç†åç«¯

```bash
cd voice_community_admin_backend
mvn spring-boot:run
# æˆ–
java -jar target/voice_community_admin_backend-0.0.1-SNAPSHOT.jar
```

#### 3. å¯åŠ¨å‰ç«¯æœåŠ¡

**ç§»åŠ¨ç«¯å‰ç«¯**ï¼š
```bash
cd voice_community_fe
npm run dev
```

**ç®¡ç†åå°å‰ç«¯**ï¼š
```bash
cd voice_community_admin_fe
npm run dev
```

**Webé—¨æˆ·å‰ç«¯**ï¼š
```bash
cd voice_community_web
npm run dev
```

## ğŸ“ æœåŠ¡è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- ğŸ“± **ç§»åŠ¨ç«¯å‰ç«¯**: http://localhost:2000
- âš™ï¸ **ç®¡ç†åå°å‰ç«¯**: http://localhost:2001
- ğŸŒ **Webé—¨æˆ·å‰ç«¯**: http://localhost:2002
- ğŸ–¥ï¸ **ä¸»åç«¯API**: http://localhost:8081
- ğŸ”§ **ç®¡ç†åç«¯API**: http://localhost:8082

## âœ… å½“å‰çŠ¶æ€

- âœ… æ•°æ®åº“å·²åˆå§‹åŒ–å¹¶åŒ…å«æµ‹è¯•æ•°æ®
- âœ… å‰ç«¯ä¾èµ–å·²å®‰è£…
- âœ… å‰ç«¯æœåŠ¡å¯æ­£å¸¸å¯åŠ¨
- âŒ åç«¯æœåŠ¡éœ€è¦è§£å†³Javaç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

## ğŸ” éªŒè¯æœåŠ¡è¿è¡Œ

### æ£€æŸ¥ç«¯å£å ç”¨

```bash
lsof -i :8081  # ä¸»åç«¯
lsof -i :8082  # ç®¡ç†åç«¯
lsof -i :2000  # ç§»åŠ¨ç«¯å‰ç«¯
lsof -i :2001  # ç®¡ç†åå°å‰ç«¯
lsof -i :2002  # Webé—¨æˆ·å‰ç«¯
```

### æµ‹è¯•API

```bash
# æµ‹è¯•ä¸»åç«¯
curl http://localhost:8081/user/getAllUsers

# æµ‹è¯•ç®¡ç†åç«¯
curl http://localhost:8082/admin/api/users
```

## ğŸ“ æ—¥å¿—æ–‡ä»¶

æ‰€æœ‰æœåŠ¡çš„æ—¥å¿—æ–‡ä»¶ä½äº `logs/` ç›®å½•ï¼š

- `backend-8081.log` - ä¸»åç«¯æ—¥å¿—
- `backend-8082.log` - ç®¡ç†åç«¯æ—¥å¿—
- `frontend-2000.log` - ç§»åŠ¨ç«¯å‰ç«¯æ—¥å¿—
- `frontend-2001.log` - ç®¡ç†åå°å‰ç«¯æ—¥å¿—
- `frontend-2002.log` - Webé—¨æˆ·å‰ç«¯æ—¥å¿—

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
tail -f logs/backend-8081.log
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### åç«¯ç¼–è¯‘å¤±è´¥

**é—®é¢˜**ï¼š`ExceptionInInitializerError: com.sun.tools.javac.code.TypeTag :: UNKNOWN`

**åŸå› **ï¼šLombok ä¸ Java 25 ä¸å…¼å®¹

**è§£å†³**ï¼šä½¿ç”¨ Java 21 æˆ–åœ¨ IDE ä¸­ç¼–è¯‘è¿è¡Œ

### ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -ti:8081 | xargs kill -9
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```bash
ls -la voice_community_backend/data/voice_community.db
```

### å‰ç«¯APIè¯·æ±‚å¤±è´¥

1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ä»£ç†é…ç½®ï¼ˆ`vite.config.ts`ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./deploy/å¿«é€Ÿå¯åŠ¨.md)
- [éƒ¨ç½²æŒ‡å—](./deploy/éƒ¨ç½²æŒ‡å—.md)
- [æ„å»ºå’Œè¿è¡ŒæŒ‡å—](./æ„å»ºå’Œè¿è¡ŒæŒ‡å—.md)
- [æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ–‡æ¡£](./æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ–‡æ¡£.md)

